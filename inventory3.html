<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Modern বাংলা ERP</title>

  <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;500;600&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <style>
    *{box-sizing:border-box}
    body{margin:0;font-family:'Hind Siliguri',sans-serif;background:#0f172a;color:#0f172a}

    /* Login */
    #loginOverlay{position:fixed;inset:0;background:linear-gradient(135deg,#0f172a,#1e293b);display:flex;align-items:center;justify-content:center;z-index:999}
    .login-box{background:#ffffff;border-radius:20px;padding:40px;width:340px;text-align:center;box-shadow:0 20px 60px rgba(0,0,0,.4)}
    .login-box h2{margin-top:0}

    /* Layout */
    .app{display:none}
    .sidebar{position:fixed;left:0;top:0;bottom:0;width:230px;background:#020617;color:#fff;padding:20px}
    .logo{font-size:20px;font-weight:700;margin-bottom:30px}
    .nav button{width:100%;margin-bottom:10px;padding:12px;border:none;border-radius:12px;background:#0f172a;color:#fff;cursor:pointer;text-align:left}
    .nav button.active{background:#22c55e;color:#022c22}

    .main{margin-left:230px;padding:25px}

    /* Cards */
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:15px;margin-bottom:20px}
    .card{background:#ffffff;border-radius:18px;padding:20px;box-shadow:0 10px 25px rgba(0,0,0,.08)}
    .card h3{margin:0;font-size:14px;color:#64748b}
    .card p{font-size:24px;margin:10px 0 0;font-weight:700}

    /* Sections */
    .section{display:none}
    .section.active{display:block}

    /* Form */
    input,select,button{width:100%;padding:12px;border-radius:12px;border:1px solid #e2e8f0;margin-bottom:10px;font-family:inherit}
    button{cursor:pointer;border:none;background:#22c55e;color:#022c22;font-weight:600}

    table{width:100%;border-collapse:collapse;background:#fff;border-radius:16px;overflow:hidden;box-shadow:0 8px 20px rgba(0,0,0,.08)}
    th,td{padding:12px;border-bottom:1px solid #f1f5f9;text-align:left}
    th{background:#f8fafc}

    footer{text-align:center;color:#94a3b8;margin-top:40px}

    @media(max-width:900px){
      .sidebar{position:relative;width:100%;display:flex;overflow:auto}
      .main{margin-left:0}
    }
  </style>
</head>
<body onload="initApp()">

<!-- Login -->
<div id="loginOverlay">
  <div class="login-box">
    <h2>ERP লগইন</h2>
    <input type="password" id="passInput" placeholder="পাসওয়ার্ড" />
    <button onclick="doLogin()">প্রবেশ করুন</button>
  </div>
</div>

<div class="app" id="app">

  <div class="sidebar">
    <div class="logo" id="shopTitle">আমার দোকান</div>
    <div class="nav">
      <button class="active" onclick="openTab('dashboard',this)">ড্যাশবোর্ড</button>
      <button onclick="openTab('stock',this)">পণ্য</button>
      <button onclick="openTab('pos',this)">বিক্রয়</button>
      <button onclick="openTab('expense',this)">খরচ</button>
      <button onclick="openTab('report',this)">রিপোর্ট</button>
      <button onclick="openTab('settings',this)">সেটিংস</button>
    </div>
  </div>

  <div class="main">

    <!-- Dashboard -->
    <div id="dashboard" class="section active">
      <div class="cards">
        <div class="card"><h3>মোট বিক্রয়</h3><p id="dSell">৳0</p></div>
        <div class="card"><h3>মোট খরচ</h3><p id="dExp">৳0</p></div>
        <div class="card"><h3>মোট লাভ</h3><p id="dProfit">৳0</p></div>
        <div class="card"><h3>পণ্য সংখ্যা</h3><p id="dProd">0</p></div>
      </div>
      <canvas id="chart"></canvas>
    </div>

    <!-- Stock -->
    <div id="stock" class="section">
      <input id="pName" placeholder="পণ্যের নাম">
      <input id="pPrice" type="number" placeholder="মূল্য">
      <input id="pQty" type="number" placeholder="পরিমাণ">
      <button onclick="addStock()">পণ্য যোগ করুন</button>

      <table>
        <thead><tr><th>নাম</th><th>মূল্য</th><th>পরিমাণ</th><th></th></tr></thead>
        <tbody id="stockBody"></tbody>
      </table>
    </div>

    <!-- POS -->
    <div id="pos" class="section">
      <select id="sel"></select>
      <input id="qty" type="number" value="1" oninput="calc()">
      <h3>মোট: ৳ <span id="total">0</span></h3>
      <button onclick="sell()">বিক্রয় সম্পন্ন</button>
    </div>

    <!-- Expense -->
    <div id="expense" class="section">
      <input id="eName" placeholder="খরচের নাম">
      <input id="eAmt" type="number" placeholder="টাকা">
      <button onclick="addExpense()">খরচ যোগ</button>

      <table>
        <tbody id="expBody"></tbody>
      </table>
    </div>

    <!-- Report -->
    <div id="report" class="section">
      <h2 id="profitText"></h2>
    </div>

    <!-- Settings -->
    <div id="settings" class="section">
      <input id="sName" placeholder="দোকানের নাম">
      <input id="sPass" placeholder="নতুন পাসওয়ার্ড">
      <button onclick="saveSettings()">সেভ</button>
    </div>

    <footer>Modern বাংলা ERP • GitHub Ready</footer>
  </div>
</div>

<script>
let stock=JSON.parse(localStorage.stock||'[]')
let sales=JSON.parse(localStorage.sales||'[]')
let exp=JSON.parse(localStorage.exp||'[]')
let set=JSON.parse(localStorage.set||'{"name":"আমার দোকান","pass":"1234"}')

function initApp(){
  shopTitle.innerText=set.name
  renderAll()
}

function doLogin(){
  if(passInput.value===set.pass){loginOverlay.style.display='none';app.style.display='block'}
  else alert('ভুল পাসওয়ার্ড')
}

function openTab(id,btn){
  document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'))
  document.querySelectorAll('.nav button').forEach(b=>b.classList.remove('active'))
  document.getElementById(id).classList.add('active');btn.classList.add('active')
}

function save(){localStorage.stock=JSON.stringify(stock);localStorage.sales=JSON.stringify(sales);localStorage.exp=JSON.stringify(exp);localStorage.set=JSON.stringify(set)}

function renderAll(){renderStock();renderExp();dash();chartRender()}

function addStock(){if(!pName.value)return;stock.push({n:pName.value,p:+pPrice.value||0,q:+pQty.value||0});save();renderAll()}

function renderStock(){stockBody.innerHTML='';sel.innerHTML='';stock.forEach((i,x)=>{stockBody.innerHTML+=`<tr><td>${i.n}</td><td>${i.p}</td><td>${i.q}</td><td><button onclick="del(${x})">✖</button></td></tr>`;sel.innerHTML+=`<option value="${x}">${i.n}</option>`})}

function del(i){stock.splice(i,1);save();renderAll()}

function calc(){let i=stock[sel.value];if(!i)return;total.innerText=i.p*(+qty.value||0)}

function sell(){let i=stock[sel.value];let q=+qty.value||0;if(!i||i.q<q)return alert('স্টক নেই');let t=i.p*q;i.q-=q;sales.push(t);save();renderAll()}

function addExpense(){if(!eName.value)return;exp.push({n:eName.value,a:+eAmt.value||0});save();renderAll()}

function renderExp(){expBody.innerHTML='';exp.forEach(e=>expBody.innerHTML+=`<tr><td>${e.n}</td><td>${e.a}</td></tr>`)}

function dash(){let s=sales.reduce((a,b)=>a+b,0);let e=exp.reduce((a,b)=>a+b.a,0);dSell.innerText='৳'+s;dExp.innerText='৳'+e;dProfit.innerText='৳'+(s-e);dProd.innerText=stock.length}

let ch;function chartRender(){let ctx=document.getElementById('chart');if(ch)ch.destroy();ch=new Chart(ctx,{type:'line',data:{labels:sales.map((_,i)=>i+1),datasets:[{data:sales}]}})}

function saveSettings(){set.name=sName.value||set.name;set.pass=sPass.value||set.pass;save();location.reload()}
</script>

</body>
</html>
